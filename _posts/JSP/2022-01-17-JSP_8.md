---
title: "[JSP] 29~42ê°• ì •ë¦¬"
excerpt: "Servlet/JSPë¥¼ í•™ìŠµí•˜ê³  ì •ë¦¬í•´ë³´ì!"

categories:
  - JSP
tags:
  - [JSP, Servlet, Java, Backend]

toc: true
toc_sticky: true

date: 2022-01-17
last_modified_at: 2022-01-17
published: false
---

ğŸ˜‹ Servlet/JSP ê°•ì˜ 29~42ê°•ì— ëŒ€í•œ ë‚´ìš© ì •ë¦¬

## Chapter29 - Cookieë¥¼ ì´ìš©í•´ ìƒíƒœê°’ ìœ ì§€í•˜ê¸°

- ì„œë²„ì¸¡ ì €ì¥ ê³µê°„
  - Application : ê³µìš© ê³µê°„
  - Session : ì„¸ì…˜ ê°œë³„ ê³µê°„
- í´ë¼ì´ì–¸íŠ¸ì¸¡ ì €ì¥ê³µê°„

  - Cookie : í´ë¼ì´ì–¸íŠ¸ê°€ ê°€ì§€ê³  ë‹¤ë‹ ìˆ˜ ìˆëŠ” ê°’

### ì¿ í‚¤ ì‚¬ìš©ë²•

`addCookie();`  
`getCookies();`  
`respose.addCookie(cookie);`  
ì¿ í‚¤ê°’ìœ¼ë¡œëŠ” ë°˜ë“œì‹œ ë¬¸ìì—´ë§Œ ì „ì†¡

- cookie ê°’ ì €ì¥

```jsp
Cookie valueCookie = new Cookie("value", String.valueOf(v));
Cookie opCookie = new Cookie("op", op);
response.addCookie(valueCookie);
response.addCookie(opCookie);
```

- cookie ê°’ ê°€ì ¸ì˜¤ê¸°

```jsp
Cookie[] cookies = request.getCookies(); //ì¿ í‚¤ ê°€ì ¸ì˜¤ê¸°

			int x = 0;
//			Cookie c = cookies[0];
			for(Cookie c : cookies) { //ì¿ í‚¤ ë°°ì—´ ì¤‘
				if(c.getName().equals("value")) { //value í‚¤ ì°¾ê¸°
					x = Integer.parseInt(c.getValue());
					break;
				}
			}

			String operator = "";
			for(Cookie c : cookies) { //ì¿ í‚¤ ë°°ì—´ ì¤‘
				if(c.getName().equals("op")) { //op í‚¤ ì°¾ê¸°
					operator = c.getValue();
					break;
				}
			}
```

## Chapter30 - Cookieì˜ path ì˜µì…˜

í•´ë‹¹ urlì—ì„œë§Œ í•´ë‹¹ Cookieë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ url ì„¤ì •
`setPath` ì‚¬ìš©

```jsp
valueCookie.setPath("/add");
opCookie.setPath("/add");
```

## Chapter31 - Cookieì˜ maxAge ì˜µì…˜

- ì¿ í‚¤ì˜ ìƒì¡´ ì£¼ê¸° ì„¤ì •
- ê¸°ë³¸ì ìœ¼ë¡  ë¸Œë¼ìš°ì €ì˜ ìƒì¡´ ì£¼ê¸°ì™€ ë™ì¼
- ì£¼ê¸° ì„¤ì • ì‹œ ë¸Œë¼ìš°ì €ê°€ ë‹«í˜€ë„ ìœ ì§€ ê°€ëŠ¥
- ë¸Œë¼ìš°ì €ì˜ ë©”ëª¨ë¦¬ì— ì €ì¥ ë¨
- C:~~~ pc ë‚´ë¶€ì— ì €ì¥

```jsp
valueCookie.setMaxAge(24*60*60);//24*60*60 ì´ˆ = 24ì‹œê°„ ë™ì•ˆ ìœ ì§€
```

## Chapter32 - Application / Seesion / Cookie ì°¨ì´ì  ì •ë¦¬

|  **ì¢…ë¥˜**   |                ì‚¬ìš©ë²”ìœ„                 |                     ìƒëª…ì£¼ê¸°                     |               ì €ì¥ìœ„ì¹˜               |
| :---------: | :-------------------------------------: | :----------------------------------------------: | :----------------------------------: |
| Application |   `ì „ì—­ ë²”ìœ„`ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì €ì¥ ê³µê°„    |         `WAS`ê°€ ì‹œì‘í•´ì„œ ì¢…ë£Œí•  ë•Œ ê¹Œì§€          |         `WAS` ì„œë²„ì˜ ë©”ëª¨ë¦¬          |
|   Session   |   `ì„¸ì…˜ ë²”ìœ„`ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì €ì¥ ê³µê°„    |         `ì„¸ì…˜`ì´ ì‹œì‘í•´ì„œ ì¢…ë£Œí•  ë•Œ ê¹Œì§€         |         `WAS` ì„œë²„ì˜ ë©”ëª¨ë¦¬          |
|   Cookie    | `Web Browser`ë³„ ì§€ì •í•œ `path ë²”ì£¼` ê³µê°„ | `Browserì— ì „ë‹¬í•œ ì‹œê°„` ë¶€í„°<br/> `ë§Œë£Œì‹œê°„`ê¹Œì§€ | `Web Browser ë©”ëª¨ë¦¬`</br>ë˜ëŠ” `íŒŒì¼` |

- ê°’ ì €ì¥ì˜ ê¸°ê°„ì´ ê¸¸ì–´ì§ˆ ê²½ìš°: `Cookie`ì— ì €ì¥
- íŠ¹ì • urlì—ì„œë§Œ ì‚¬ìš©í•  ë°ì´í„°: `Cookie`ì— ì €ì¥

## Chapter33 - ì„œë²„ì—ì„œ í˜ì´ì§€ ì „í™˜í•´ì£¼ê¸°(redirection)

- ê²°ê³¼ ê°’ì„ í˜ì´ì§€ë¡œ ì „ë‹¬í•´ì¤Œ
- ë¹ˆí™”ë©´ì„ ë„ìš°ì§€ ì•ŠìŒ

```jsp
response.sendRedirect("calc2.html");
```

`response` ê°’ìœ¼ë¡œ `html` ë°˜í™˜

## Chapter34 - ë™ì ì¸ í˜ì´ì§€(ì„œë²„ í˜ì´ì§€)ì˜ í•„ìš”ì„±

- ë™ì ìœ¼ë¡œ ë¬¸ì„œë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜
- Servletìœ¼ë¡œ ìƒì„±í•˜ì—¬ ë°˜í™˜

<img src="https://user-images.githubusercontent.com/47810773/149707807-3a80e03f-8fd3-4db2-9096-aec8771d2128.JPG">

ê³„ì‚°ê¸° í˜ì´ì§€ ì •ì  html ì‘ì„±  
0 ë¶€ë¶„ ìˆ«ì ë³€ê²½ë  ìˆ˜ ìˆë„ë¡ ë™ì  servelt ì‘ì„± í•„ìš”

## Chapter35 - ì²˜ìŒì´ì ë§ˆì§€ë§‰ìœ¼ë¡œ ë™ì ì¸ í˜ì´ì§€ ì„œë¸”ë¦¿ìœ¼ë¡œ ì§ì ‘ ë§Œë“¤ê¸°

ì˜›ë‚  ë°©ì‹ì„ ê²½í—˜í•´ë³´ê³  í˜„ì¬ ìŠ¤íƒì˜ í¸ë¦¬í•¨ì„ ëŠê»´ë³´ê¸° ìœ„í•´ ì„œë¸”ë¦¿ì„ ì§ì ‘ êµ¬í˜„í•´ë³´ì•˜ë‹¤.  
html ì½”ë“œë¥¼ ê°€ì ¸ì˜¨ í›„ ëª¨ë‘ `response.getWriter` ë¡œ ì¶œë ¥ í•´ì£¼ì—ˆê³ ...  
" " ë”ë¸”ì¿¼í…Œì´ì…˜ ì¸ì‹ì„ ìœ„í•´ ì•ì— \ í‘œì‹œë„ ëª¨ë‘ ë¶™ì—¬ì£¼ì—ˆë‹¤...

- `servlet` ì½”ë“œ

```jsp
PrintWriter out = response.getWriter();


		out.write("<!DOCTYPE html>");
		out.write("<html lang=\"en\">");
		out.write("<head>");
		out.write("<meta charset=\"UTF-8\">");
		out.write("<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">");
		out.write("<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">");
		out.write("<title>Add page</title>");
		out.write("<style>");
		out.write("input {");
		out.write("width: 50px;");
		out.write("height: 50px;");
		out.write("}");

		out.write(".output {");
		out.write("height: 50px;");
		out.write("background-color: #e9e9e9;");
		out.write("font-size: 24px;");
		out.write("font-weight: bold;");
		out.write("text-align: right;");
		out.write("padding: 0px 5px;");
		out.write("}");
		out.write("</style>");
		out.write("</head>");

		out.write("<body>");
		out.write("<form action=\"calc3\" method=\"post\">");
		out.write("<table>");
		out.write("<tr>");
		out.printf("<td class=\"output\" colspan=\"4\">%d</td>",3+4); //ê³„ì‚°ëœ ê²°ê³¼ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆë‹¤!
		out.write("</tr>");
		out.write("<tr>");
		out.write("<td><input type=\"submit\" name=\"operator\" value=\"CE\"></td>");
		out.write("<td><input type=\"submit\" name=\"operator\" value=\"C\"></td>");
		out.write("<td><input type=\"submit\" name=\"operator\" value=\"BS\"></td>");
		out.write("<td><input type=\"submit\" name=\"operator\" value=\"Ã·\"></td>");
		out.write("</tr>");
		out.write("<tr>");
		out.write("<td><input type=\"submit\" name=\"value\" value=\"7\"></td>");
		out.write("<td><input type=\"submit\" name=\"value\" value=\"8\"></td>");
		out.write("<td><input type=\"submit\" name=\"value\" value=\"9\"></td>");
		out.write("<td><input type=\"submit\" name=\"operator\" value=\"X\"></td>");
		out.write("</tr>");
		out.write("<tr>");
		out.write("<td><input type=\"submit\" name=\"value\" value=\"4\"></td>");
		out.write("<td><input type=\"submit\" name=\"value\" value=\"5\"></td>");
		out.write("<td><input type=\"submit\" name=\"value\" value=\"6\"></td>");
		out.write("<td><input type=\"submit\" name=\"operator\" value=\"-\"></td>");
		out.write("</tr>");
		out.write("<tr>");
		out.write("<td><input type=\"submit\" name=\"value\" value=\"1\"></td>");
		out.write("<td><input type=\"submit\" name=\"value\" value=\"2\"></td>");
		out.write("<td><input type=\"submit\" name=\"value\" value=\"3\"></td>");
		out.write("<td><input type=\"submit\" name=\"operator\" value=\"+\"></td>");
		out.write("</tr>");
		out.write("<tr>");
		out.write("<td></td>");
		out.write("<td><input type=\"submit\" name=\"value\" value=\"0\"></td>");
		out.write("<td><input type=\"submit\" name=\"dot\" value=\".\"></td>");
		out.write("<td><input type=\"submit\" name=\"operator\" value=\"=\"></td>");
		out.write("</tr>");
		out.write("</table>");
		out.write("</form>");
		out.write("</body>");

		out.write("</html>");
```

ìš°ì™€...

## Chapter36 - ê³„ì‚°ê¸° ì„œë¸”ë¦¿ ì™„ì„±í•˜ê¸°

- ë°›ì•„ì˜¨ ì…ë ¥ê°’ì„ ì¿ í‚¤ì— ì €ì¥í•˜ì—¬ ë°˜í™˜í•´ì£¼ëŠ” ì½”ë“œ ì‘ì„±

```jsp
if(operator != null && operator.equals("=")) {
			ScriptEngine engine = new ScriptEngineManager().getEngineByName("graal.js"); //jsì—”ì§„ ì‚¬ìš©
			try {
				exp = String.valueOf(engine.eval(exp));
			} catch (ScriptException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}
```

- js ì—”ì§„ ì‚¬ìš©í•˜ì—¬ ê³„ì‚° ê²°ê³¼ ì¶œë ¥ë¶€ë¶„ êµ¬ì„±

## Chapter37 - ì¿ í‚¤ ì‚­ì œí•˜ê¸°

```jsp
exp = ""; //exp ë¬¸ìì—´ ë¹„ìš°ê¸°
if(operator != null && operator.equals("C"))
			expCookie.setMaxAge(0); //ì¿ í‚¤ ë¹„ìš°ê¸°
```

`cookie.setMaxAge(0);` ì¿ í‚¤ ì¦‰ì‹œ ì‚­ì œ  
`cookie.setMaxAge(S);` ~ì´ˆ ë’¤ ì‚­ì œ  
`cookie.setMaxAge(-1);` ì„¸ì…˜ ì¢…ë£Œì‹œ ì‚­ì œ(ë¸Œë¼ìš°ì € ì¢…ë£Œì‹œ)

## Chapter38 - Getê³¼ POSTì— íŠ¹í™”ëœ ì„œë¹„ìŠ¤ í•¨ìˆ˜

- ì„œë¹„ìŠ¤ë¡œì§

1. Init() -> service() -> `doGet()`
2. Init() -> service() -> `doPost()`

service() ì‹¤í–‰ í›„ `Get` ë˜ëŠ” `Post` ë©”ì„œë“œ ì‹¤í–‰

ì•„ë˜ ì½”ë“œì— `method="post"` ìš”ì²­ ì‹œ

```jsp
protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { // 1. service ì‹¤í–‰ í›„
		if(request.getMethod().equals("GET")) { //ì†Œë¬¸ì get ìš”ì²­ì´ì§€ë§Œ ëŒ€ë¬¸ìë¡œ ë³€í™˜
			System.out.println("GET ìš”ì²­ì´ ì™”ìŠµë‹ˆë‹¤");
		}
		else if(request.getMethod().equals("POST")) { //ì†Œë¬¸ì post ìš”ì²­ì´ì§€ë§Œ ëŒ€ë¬¸ìë¡œ ë³€í™˜
			System.out.println("POST ìš”ì²­ì´ ì™”ìŠµë‹ˆë‹¤");
		}

		super.service(request, response);
	}

	@Override
	protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException { // 2. override ëœ post ì‹¤í–‰
		System.out.println("POST ìš”ì²­ì´ ì™”ìŠµë‹ˆë‹¤~");
	}
```

ìƒí™©ì— ë”°ë¼ì„œ `service` ë¥¼ ì‹¤í–‰í•˜ì—¬ ê³µí†µ ë©”ì„œë“œë¥¼ ì‹¤í–‰ í›„  
`post` ë˜ëŠ” `get` íŠ¹ì • ë©”ì„œë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ë„ ìˆê³ ,  
ë°”ë¡œ `post` ë˜ëŠ” `get` ë¥¼ ì‹¤í–‰í•  ìˆ˜ë„ ìˆë‹¤.

`post` ë˜ëŠ” `get` ìš”ì²­ ì‹œ `doPost` ë‚˜ `doGet` ë©”ì„œë“œê°€ ì˜¤ë²„ë¼ì´ë”© ë˜ì–´ìˆì§€ ì•Šìœ¼ë©´ `405` ì—ëŸ¬ ë°œìƒ

## Chapter39 - ê³„ì‚°ê¸° í”„ë¡œê·¸ë¨ í•˜ë‚˜ì˜ servletìœ¼ë¡œ í•©ì¹˜ê¸°

- `doPost` ì™€ `doGet` ì„ ì‚¬ìš©í•˜ì—¬ ë‚˜ëˆ ì ¸ ìˆë˜ servletì„ í•˜ë‚˜ë¡œ í•©ì¹¨

## Chapter40 - JSP ì‹œì‘í•˜ê¸°(Jasperë¥¼ ì´ìš©í•œ Servlet í”„ë¡œê·¸ë˜ë°)

- `out.write("</body>");` ì´ëŸ°ì‹ìœ¼ë¡œ ì‘ì„±í•˜ì§€ ì•Šê³  ìë™ìœ¼ë¡œ ë³€í™˜í•˜ë„ë¡
- `add.jsp` ì‘ì„±
- `.metadata\.plugins\org.eclipse.wst.server.core\tmp0\work\Catalina\localhost\ROOT\org\apache\jsp`  
  workspace ê²½ë¡œì— ë³€í™˜ëœ íŒŒì¼ì´ ë“¤ì–´ê°€ ìˆë‹¤.

```jsp
<%
int x = 3;
int y = 4;
%>
```

jsp ì½”ë“œë¸”ëŸ­ ìƒì„±

## Chapter41 - JSPì˜ ì½”ë“œ ë¸”ë¡

```jsp
<%
ì¼ë°˜
%>

<%= ë³€ìˆ˜ %>

<%!
ë©¤ë²„
%>

<%@
ì§€ì‹œë¸”ë¡
%>
```

## Chapter42 - JSPì˜ ë‚´ì¥ê°ì²´ ê°„ë‹¨íˆ ì•Œì•„ë³´ê¸°

```jsp
<%
int page = 5; //local ë³€ìˆ˜ê°€ ì¤‘ë³µë˜ì—ˆë‹¤ëŠ” ë‚´ìš©ì˜ ì—ëŸ¬ ë°œìƒ
%>
```

ì œìŠ¤í¼ê°€ ìƒì„±í•œ ë‚´ì¥ ê°ì²´ë¥¼ ì•Œì•„ì•¼ í•¨
